<%- include ('../partials/tasks-partials/index-header') %>
  <div class="content-container">
    <h1 id="task-heading">
      <%= user.name.split(' ')[0] %>'s Daily Tasks 
    </h1>
    <h3>
      <%= new Date().toLocaleDateString() %>
    </h3>
    <% if (tasks.length===0) { %>
      <h2 class="max-w-75">You haven't added any tasks for today</h2>
    <% } else { %>
      <ul id="task-listing">
        <li class="justify-card">
          <div class="card text-center">
            <div class="card-body">
              <h3>Task 1</h3>
              <p class="card-text">
                <%= tasks[0].task0.title %>
              </p>
              <a href="/tasks/<%= tasks[0].task0._id %>/edit" class="btn btn-primary">Edit Task</a>
              <% if(tasks[0].task0.done===true) { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task0._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="false">
                    <button type="submit" class=" btn btn-success">✅ Completed</button>
                  </div>
                </form>
              <% } else { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task0._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="true">
                    <button type="submit" class=" btn btn-danger">👎🏼 Not Completed</button>
                  </div>
                </form>
              <% } %>
            </div>
          </div>
        </li>
        <li class="justify-start">
          <div class="card text-center">
            <div class="card-body">
              <h3>Task 2</h3>
              <p class="card-text">
                <%= tasks[0].task1.title %>
              </p>
              <a href="/tasks/<%= tasks[0].task1._id %>/edit" class=" btn btn-primary">Edit Task</a>
              <% if(tasks[0].task1.done===true) { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task1._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="false">
                    <button type="submit" class=" btn btn-success">✅ Completed</button>
                  </div>
                </form>
              <% } else { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task1._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="true">
                    <button type="submit" class=" btn btn-danger">👎🏼 Not Completed</button>
                  </div>
                </form>
              <% } %>
            </div>
          </div>
        </li>
        <li class="justify-card">
          <div class="card text-center">
            <div class="card-body">
              <h3>Task 3</h3>
              <p class="card-text">
                <%= tasks[0].task2.title %>
              </p>
              <a href="/tasks/<%= tasks[0].task2._id %>/edit" class=" btn btn-primary">Edit Task</a>
              <% if(tasks[0].task2.done===true) { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task2._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="false">
                    <button type="submit" class=" btn btn-success">✅ Completed</button>
                  </div>
                </form>
              <% } else { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task2._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="true">
                    <button type="submit" class=" btn btn-danger">👎🏼 Not Completed</button>
                  </div>
                </form>
              <% } %>
            </div>
          </div>
        </li>
        <li class="justify-start">
          <div class="card text-center">
            <div class="card-body">
              <h3>Task 4</h3>
              <p class="card-text">
                <%= tasks[0].task3.title %>
              </p>
              <a href="/tasks/<%= tasks[0].task3._id %>/edit" class=" btn btn-primary">Edit Task</a>
              <% if(tasks[0].task3.done===true) { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task3._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="false">
                    <button type="submit" class=" btn btn-success">✅ Completed</button>
                  </div>
                </form>
              <% } else { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task3._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="true">
                    <button type="submit" class=" btn btn-danger">👎🏼 Not Completed</button>
                  </div>
                </form>
              <% } %>
            </div>
          </div>
        </li>
        <li class="span2">
          <div class="card text-center">
            <div class="card-body">
              <h3>Task 5</h3>
              <p class="card-text">
                <%= tasks[0].task4.title %>
              </p>
              <a href="/tasks/<%= tasks[0].task4._id %>/edit" class=" btn btn-primary">Edit Task</a>
              <% if(tasks[0].task4.done===true) { %>
                <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task4._id%>?_method=PUT"
                  method="POST">
                  <div class="btn-flex">
                    <input type="hidden" name="done" value="false">
                    <button type="submit" class=" btn btn-success">✅ Completed</button>
                  </div>
                </form>
              <% } else { %>
                  <form action="/tasks/<%= tasks[0]._id %>/task/<%=tasks[0].task4._id%>?_method=PUT"
                    method="POST">
                    <div class="btn-flex">
                      <input type="hidden" name="done" value="true">
                      <button type="submit" class=" btn btn-danger">👎🏼 Not Completed</button>
                    </div>
                  </form>
              <% } %>
            </div>
          </div>
        </li>
      </ul>
      <div id="notes-bg">
        <h3 id="notes-heading">Daily Notes</h3>
        <% tasks[0].notes.forEach(function(note, idx) { %>
          <ul>
            <li>
              <form action="/tasks/<%= tasks[0]._id %>?_method=DELETE" method="POST">
                <h5 class="btn-grid">
                  <button type="submit" class="btn-close justify-card" aria-label="Close"></button>
                  <%= note %>
                </h5>
              </form>
            </li>
          </ul>
        </div>
      <% }); %>
    <% } %>
  </div>
<%- include('../partials/footer') %>